<!DOCTYPE html>
<html>
<head>
  <title>Test Jenny Clock-In</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .card {
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    h1 { color: #333; }
    h2 { color: #666; font-size: 18px; margin-top: 30px; }
    .status { padding: 15px; border-radius: 8px; margin: 10px 0; }
    .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
    .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
    button {
      background: #dc3545;
      color: white;
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      margin: 10px 5px;
      transition: all 0.2s;
    }
    button:hover { background: #c82333; transform: scale(1.02); }
    button:disabled { background: #ccc; cursor: not-allowed; transform: none; }
    .clock-icon {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: inline-block;
      margin: 20px;
      transition: all 0.3s;
    }
    .clock-icon.red { background: #dc3545; }
    .clock-icon.purple { background: #9333ea; }
    pre { background: #f8f9fa; padding: 15px; border-radius: 6px; overflow-x: auto; }
    code { background: #e9ecef; padding: 2px 6px; border-radius: 3px; }
  </style>
</head>
<body>
  <div class="card">
    <h1>üß™ Jenny Clock-In Test</h1>
    <p><strong>Student:</strong> Jenny Abshire (jenny@universalbeautystudio.com)</p>
    <p><strong>Role:</strong> Student</p>
    <p><strong>Studio:</strong> Universal Beauty Studio Academy</p>

    <h2>Current Issue:</h2>
    <div class="status error">
      ‚ùå Clock-in button fails because:<br>
      ‚Ä¢ Studio geolocation NOT configured<br>
      ‚Ä¢ System uses default: New York City<br>
      ‚Ä¢ Jenny is NOT in NYC<br>
      ‚Ä¢ Distance check fails ‚Üí "Must be within 50 feet of studio"
    </div>

    <h2>Fix Applied:</h2>
    <div class="status success">
      ‚úÖ <strong>Clock-in now works WITHOUT geolocation if studio not configured</strong><br>
      ‚Ä¢ If studio location = default NYC ‚Üí Allow clock-in from anywhere<br>
      ‚Ä¢ If studio location = custom set ‚Üí Enforce 50-foot radius<br>
      ‚Ä¢ Gracefully handles location permission denied
    </div>

    <h2>Visual Demonstration:</h2>
    <div style="text-align: center;">
      <div>
        <div class="clock-icon red" id="clock"></div>
        <div>
          <button onclick="testClockIn()" id="btnClock">üïê Clock In</button>
        </div>
        <div id="statusMsg" style="margin-top: 20px;"></div>
      </div>
    </div>

    <h2>Backend Logic:</h2>
    <pre><code>// Before Fix:
if (!isWithinStudioRadius(userLocation)) {
  throw Error("Must be within 50 feet") // ‚ùå Always fails!
}

// After Fix:
if (studioIsConfigured && userLocation) {
  if (!isWithinStudioRadius(userLocation)) {
    throw Error("Must be within 50 feet")
  }
} else {
  // ‚úÖ Allow clock-in if studio not configured
}</code></pre>

    <h2>What To Do:</h2>
    <div class="status info">
      <strong>Option A:</strong> Keep current fix (clock-in works from anywhere until owner configures location)<br><br>
      <strong>Option B:</strong> Owner configures actual studio address at <code>/studio/geolocation-settings</code>
    </div>
  </div>

  <script>
    let isClockedIn = false;

    function testClockIn() {
      const clock = document.getElementById('clock');
      const btn = document.getElementById('btnClock');
      const status = document.getElementById('statusMsg');

      if (!isClockedIn) {
        // Simulate successful clock-in
        isClockedIn = true;
        clock.className = 'clock-icon purple';
        btn.textContent = '‚èπÔ∏è Clock Out';
        btn.style.background = '#9333ea';
        
        status.innerHTML = `
          <div class="status success">
            <strong>‚úÖ Successfully clocked in!</strong><br>
            Location check: Bypassed (studio location not configured)<br>
            Clock-in time: ${new Date().toLocaleTimeString()}<br>
            Can now track hours worked
          </div>
        `;
      } else {
        // Clock out
        isClockedIn = false;
        clock.className = 'clock-icon red';
        btn.textContent = 'üïê Clock In';
        btn.style.background = '#dc3545';
        
        status.innerHTML = `
          <div class="status info">
            <strong>‚úÖ Successfully clocked out!</strong><br>
            You worked 0.02 hours today.<br>
            Click button to clock in again.
          </div>
        `;
      }
    }
  </script>
</body>
</html>

